% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/makeRarefactionCurve.R
\name{makeRarefactionCurve}
\alias{makeRarefactionCurve}
\title{Generate and Save Rarefaction Curves from a Phyloseq Object}
\usage{
makeRarefactionCurve(
  phyloseq_rawdata,
  opt,
  add_hlines = TRUE,
  name = "rarecurve"
)
}
\arguments{
\item{phyloseq_rawdata}{A \code{\link[phyloseq]{phyloseq}} object containing
an OTU/ASV table. The table will be extracted and converted to a matrix
for rarefaction analysis.}

\item{opt}{A list containing at least an element named \code{"out"} specifying
an existing output directory where plots and tables will be saved.}

\item{add_hlines}{Logical indicating whether to add horizontal lines at the
interpolated number of taxa for the minimum read depth across samples.
Default is \code{TRUE}.}

\item{name}{Character string used as the base name for output files
(tables, plots, and RData). Default is \code{"rarecurve"}.}
}
\value{
A named list with the following elements:
\itemize{
\item \code{plot} — A \code{\link[ggplot2]{ggplot}} object of the rarefaction curves.
\item \code{df} — A \code{data.frame} with the rarefaction curve data
(taxa counts at each subsampling depth for each sample).
\item \code{df_max} — A \code{data.frame} with the maximum read depth per sample.
\item \code{min_reads_all} — The overall minimum read depth across samples.
\item \code{intersection2} — A \code{data.frame} with the interpolated taxa
counts at the overall minimum read depth.
}
}
\description{
Calculates rarefaction curves for each sample in a
\code{\link[phyloseq]{phyloseq}} object using \code{\link[vegan]{rarecurve}},
saves the plots and summary tables to disk, and returns the data and plot.
}
\details{
Rarefaction curves visualize the accumulation of observed taxa as a function
of sequencing depth. This function computes them using
\code{\link[vegan]{rarecurve}} and also provides ggplot-based versions for
cleaner presentation. Summary tables include:
\enumerate{
\item All rarefaction curve points (\code{df}).
\item Final point for each sample (\code{df_max}).
\item Interpolated taxa counts at the overall minimum read depth
(\code{intersection2}).
}
}
\examples{
\dontrun{
if (interactive()) {
  library(phyloseq)
  # Example: run rarefaction on a phyloseq object 'ps'
  res <- makeRarefactionCurve(ps, opt = list(out = "results"))
  res$plot
}
}

}
\seealso{
\code{\link[vegan]{rarecurve}},
\code{\link[ggplot2]{ggplot}},
\code{\link[dplyr]{mutate}},
\code{\link[dplyr]{summarise}},
\code{\link[ggrepel]{geom_text_repel}},
\code{\link[readr]{write_tsv}}
}
